<div class="container">
    <header class="header">
        <div class="cover-wrapper">
            <img src="./assets/images/posts.jpg" class="cover-image" />
            <div class="overlay-content">
                <div class="header-inner-content">
                    <div class="title-section">
                        <h1 class="musicians" style="font-size:60px;">Posts & Vibes</h1>
                        <p style="font-size:25px;color:#fff">Create, share, and see the world through others' eyes</p>
                    </div>

                    <button class="button join-network-btn" (click)="navigateToUpload()">
                        Upload Post
                        <mat-icon>upload</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </header>


    <section class="search-bar">

        <div class="search-container" onclick="document.getElementById('q2').focus()">
            <mat-icon>search</mat-icon>
            <input id="q2" class="search-input" type="search" placeholder="Search posts" [(ngModel)]="searchText"
                (ngModelChange)="onSearchChange($event)" />



        </div>

        <select class="dropdown" Â  Â  Â  Â  Â  [(ngModel)]="selectedTimeRange" Â  Â  Â  Â  Â  Â  (change)="applyAllFilters()">
            Â  Â  Â  Â  Â  Â  Â  Â  <option value="All">All times</option>
            Â  Â  Â  Â  Â  Â  Â  Â  <option value="Today">Current Day</option>
            Â  Â  Â  Â  Â  Â  Â  Â  <option value="Week">Current Week</option>
            Â  Â  Â  Â  Â  Â  Â  Â  <option value="Month">Current Month</option>
            Â  Â  Â  Â  </select>

        Â  Â  Â  Â  <select class="dropdown">
            <option>All</option>
        </select>
        <!-- 
Â  Â  Â  Â  <button class="filters-btn" (click)="toggleFilters()">
Â  Â  Â  Â  Â  Â  Filters <span class="arrow-icon">{{ showFilters ? 'âˆ§' : 'âˆ¨' }}</span>
Â  Â  Â  Â  </button> -->
        Â  Â 
    </section>

@if (hasMorePosts) {
    <div class="load-more-container">
        <button class="button load-more-btn" (click)="loadMore()">
            ×˜×¢×Ÿ ×¢×•×“ ×¤×•×¡×˜×™×
            <mat-icon>expand_more</mat-icon>
        </button>
    </div>
}
@if(displayedPosts.length===0){
    <div class="empty-posts-container">
        <p class="empty-message">×¢×“×™×™×Ÿ ×œ× ×¤×•×¨×¡××• ×¤×•×¡×˜×™×. ×”×ª×—×œ ×œ×©×ª×£ ××ª ×”××•×–×™×§×” ×©×œ×š ×¢×›×©×™×•!</p>

        <button class="upload-post-button" routerLink="/post">...</button>
        <span style="font-size: 1.5em; margin-left: 10px;">ğŸ¶</span>
        ×”×¢×œ×” ××ª ×”×¤×•×¡×˜ ×”×¨××©×•×Ÿ ×©×œ×š
        <span style="font-size: 1.5em; margin-right: 10px;">â¬†ï¸</span>
    </div>
}
@else{

    @for(post of displayedPosts; track $index){
   <app-post-card
    [post]="post"
    [isProfileView]="isProfileView"
    [showOnlyMedia]="showOnlyMedia"
    [searchText]="searchText"
    [isAdmin]="isAdmin">
</app-post-card>


    }

    <!-- [searchText]="searchText" -->

    }
    <br><br><br>
</div>





<!-- 


<header class="post-header">
            <img class="avatar" [src]="fileUtils.getImageUrl(post.user?.imageProfilePath)" alt="avatar">

            <div class="user-info">
                <span class="username">{{post.user?.name}}</span>
                <span class="date">{{post.dateUploaded | date:'short'}}</span>
            </div>

           
        </header>

        <div class="post-body">
            <h3 class="post-title">{{post.title}}</h3>
            <p class="post-content">{{post.content}}</p>

            <div class="post-media">
                <div *ngFor="let image of post.imagesBase64" class="image-container">
                    <img [src]="fileUtils.getImageUrl(image)" class="post-image">
                </div>

                <audio *ngIf="post.audioPath" controls [src]="getSafeMediaUrl('audio/' + post.audioPath)"></audio>

                <video *ngIf="post.videoPath" controls [src]="getSafeMediaUrl('video/' + post.videoPath)"></video>
            </div>
        </div>



        <hr>

        <div class="comments-actions-row">
            <button class="view-comments-btn" (click)="toggleComments(post.id!)">
                {{ showComments[post.id!] ? '×¡×’×•×¨ ×ª×’×•×‘×•×ª' : '×¦×¤×™×™×” ×‘×ª×’×•×‘×•×ª' }}
            </button>
            <button class="add-comment-page-btn" (click)="navigateToAddComment(post.id!)">
                ×”×•×¡×£ ×ª×’×•×‘×” <mat-icon>add_comment</mat-icon>
            </button>
        </div>

        <div class="comments-wrapper" *ngIf="showComments[post.id!]" [class.open]="showComments[post.id!]">

            <app-comment [postId]="post.id!"></app-comment>
        </div>

    </div>


    <!-- <footer class="post-footer">
        <div class="stats">
            <span>â¤ï¸ {{post.hearts}}</span>
            <span>ğŸ‘ {{post.likes}}</span>
        </div> -->
<!-- 
            <app-like-button
        [targetType]="'POST'" 
        [targetId]="post.id"
        [initialLikeCount]="post.likeCount"
        [isLikedByUser]="post.isLikedByCurrentUser"> 
    </app-like-button> -->
<!-- </footer> -->

<hr>


<!-- }} -->

<!-- <br><br><br> -->

<br><br><br>
