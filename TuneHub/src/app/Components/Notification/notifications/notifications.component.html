<div class="container">
    <header class="header">
        <div class="cover-wrapper"> <img src="./assets/images/notifications.png" class="cover-image"
                alt="Notifications cover" />
            <div class="overlay-content">
                <div class="header-inner-content">
                    <div class="title-section">
                        <h1 class="musicians" style="font-size: 60px;">Notifications</h1>
                        <p style="font-size: 25px; color: #ffffff;">Stay updated with your musical journey</p>
                    </div> <button class="button" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
                        <mat-icon>done_all</mat-icon>Mark all as read </button>
                </div>
            </div>
        </div>
    </header>
    <div class="stats-card-container">
        <div class="stats-card" dir="ltr">
            <div class="stat-item white-glow">
                <div class="stat-number">{{ unreadCount }}</div>
                <div class="stat-label">Unread</div>
            </div>
            <div class="stat-item purple-glow">
                <div class="stat-number">127</div>
                <div class="stat-label">This Week</div>
            </div>
            <div class="stat-item blue-glow">
                <div class="stat-number">89</div>
                <div class="stat-label">New Followers</div>
            </div>
            <div class="stat-item green-glow">
                <div class="stat-number">2.4K</div>
                <div class="stat-label">Interactions</div>
            </div>
        </div>
    </div>
    <div class="mb-6 flex justify-center">
        <div class="inline-flex space-x-3 p-1 rounded-xl bg-gray-800 shadow-inner"> <mat-icon>filter_alt</mat-icon>
          <button class="category-btn"
                [class.button]="unreadOnly"
                (click)="toggleUnread()">
            <mat-icon>{{ unreadOnly ? 'visibility_off' : 'visibility' }}</mat-icon>
            {{ unreadOnly ? '爪 ' : '专拽  拽专' }}
        </button>
            <span>Filter by type</span>
            <div class="categories-center">
                <div class="categories-box"> <button *ngFor="let category of categories"
                        (click)="setActiveCategory(category.key)" [class.button]="activeCategory === category.key"
                        class="category-btn"> {{ category.label }} <span *ngIf="category.unreadCount > 0"
                            class="badge">{{ category.unreadCount }}</span> </button> </div>
            </div>
            <div *ngIf="filteredNotifications.length > 0; else noNotifications">
                <div *ngFor="let notification of filteredNotifications" [class.bg-gray-700]="notification.isRead"
                    [class.bg-gray-800]="!notification.isRead"
                    class="flex items-start p-4 mb-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border"
                    [class.border-indigo-600]="!notification.isRead" [class.border-gray-700]="notification.isRead">
                    <div class="notification" [class.unread]="!notification.isRead" (click)="markAsRead(notification)">
                        <div class="relative flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center text-xl mr-4"
                            [class.bg-indigo-600]="!notification.isRead" [class.bg-gray-600]="notification.isRead"> {{
                            getIconForType(notification.type) }} <div *ngIf="!notification.isRead"
                                class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-gray-800">
                            </div>
                        </div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-semibold text-lg" [class.text-white]="!notification.isRead"
                                        [class.text-gray-300]="notification.isRead"> {{ notification.title }} </p>
                                    <p class="text-sm text-gray-400 mt-0.5">{{ notification.message }}</p>
                                    <p class="text-xs text-gray-500 mt-2">{{ notification.createdAt | timeAgo }}</p>
                                </div> <button *ngIf="notification.type === 'FOLLOW_REQUESTS'" class="approve-btn"
                                    (click)="approveFollow(notification.targetId!)">Approve</button>
                                <div class="flex-shrink-0 ml-4 space-x-2"> <button *ngIf="!notification.isRead"
                                        (click)="markAsRead(notification)"
                                        class="text-xs px-2 py-1 border border-indigo-500 text-indigo-300 rounded hover:bg-indigo-900 transition duration-200">
                                        住 拽专 </button> <button (click)="deleteNotification(notification.id)"
                                        class="text-gray-500 hover:text-red-500 transition duration-200"> <svg
                                            xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <path d="M18 6l-12 12M6 6l12 12" />
                                        </svg> </button> <button *ngIf="notification.type === 'ADMIN'"
                                        class="px-3 py-1 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-700">
                                        Claim Prize </button> <button *ngIf="notification.type === 'COMMENTS'"
                                        class="px-3 py-1 bg-purple-600 text-white text-sm font-semibold rounded-lg hover:bg-purple-700">
                                        View Comment </button> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <button *ngIf="hasMore" class="load-more" (click)="loadMore()">Load More</button> <ng-template
                #noNotifications>
                <div class="text-center p-10 bg-gray-800 rounded-xl mt-10">
                    <p class="text-xl text-gray-400"> 转专转 爪 拽专 .</p>
                    <p class="text-sm text-gray-500 mt-2"> 砖拽 驻. </p>
                </div>
            </ng-template>
        </div>
    </div>
</div>