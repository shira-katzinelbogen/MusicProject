<div class="profile-container">

  <section class="profile-card">

    <!-- Cover Image -->
    <div class="cover-image-wrapper">
      <img src="./assets/images/3.jpg" alt="Cover Image" class="cover-image">
    </div>

    <!-- Profile Info -->
    <div class="profile-info-section">

      <!-- Profile Picture with Active Dot -->
      <div class="profile-picture-wrapper">
        <img [src]="fileUtilsService.getImageUrl(profileData?.imageProfilePath)" alt="Profile Picture"
          class="profile-image">


        <span class="active-dot"></span>
      </div>

      <!-- User Details -->
      <div class="user-details">
   
        <h2>{{ profileData?.name }}</h2>
        <!-- <div class="followers-stats">
          <span class="follow">followers: {{ profileData?.followers?.length }}</span>
          <span class="follow">following: {{ profileData?.followers?.length || 0 }}</span>
        </div> -->

        <div class="contact-details">
          <span *ngIf="profileData?.city && profileData?.country" class="location">
            <mat-icon>location_on</mat-icon>

            {{ profileData?.city }}, {{ profileData?.country }}
          </span>
          <span *ngIf="profileData?.email" class="website">
            <mat-icon>email</mat-icon>

            <a [href]="profileData?.email" target="_blank">{{ profileData?.email }}</a>
          </span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <!-- <button class="message-btn" (click)="sendMessage()">Message</button> -->
        <button class="button" (click)="followUser()">
          {{ isFollowing ? 'Unfollow' : 'Follow' }}
        </button>
      </div>

    </div>

  </section>

</div>

<!-- Description Section -->
<div class="profile-description" *ngIf="profileData?.description || profileData?.teacher">

  <!-- Role / Teacher Status -->
  <div class="role-section" *ngIf="profileData?.teacher">
    ğŸ‘¨â€ğŸ« ××•×¨×” ×œ××•×–×™×§×”
    <!-- <div class="students-count" *ngIf="profileData?.">
      ×ª×œ××™×“×™×: {{ profileData?.studentsCount }}
    </div> -->
  </div>

  <!-- User Description -->
  <p class="description-text" *ngIf="profileData?.description">
    {{ profileData?.description }}
  </p>

</div>

<!-- Profile Navigation Tabs -->
<div class="profile-tabs">
    <button [class.button]="activeTab==='overview'" (click)="activeTab='overview'">
        <i class="material-icons">person_outline</i> Overview
    </button>
    
    <button [class.button]="activeTab==='tracks'" (click)="activeTab='tracks'">
        <i class="material-icons">music_note</i> Tracks (0)
    </button>

    <button [class.button]="activeTab==='movies'" (click)="activeTab='movies'">
        <i class="material-icons">videocam</i> Videos (0)
    </button>
    
    <button [class.button]="activeTab==='sheets'" (click)="activeTab='sheets'">
        <i class="material-icons">description</i> Sheets  ({{profileData?.sheetsMusic?.length}})
    </button>
    
    <button [class.button]="activeTab==='posts'" (click)="activeTab='posts'">
        <i class="material-icons">chat_bubble_outline</i> Posts ({{profileData?.posts?.length}})
    </button>

    </div>



<div class="tab-content">

  <div *ngIf="activeTab === 'posts'">
    
  </div>

  <div class="action-buttons">
    
    @if (isCurrentUserProfile) {
        <button class="edit-btn button" (click)="editProfile()">
            ×¢×¨×•×š ×¤×¨×•×¤×™×œ
            <mat-icon>edit</mat-icon>
        </button>

        <button class="signout-btn button" (click)="signOut()">
            ×”×ª× ×ª×§
            <mat-icon>logout</mat-icon>
        </button>

    } @else {
        <button 
            class="button follow-btn" 
            [class.unfollow]="isFollowing"
            [disabled]="!currentUserId" (click)="followUser()">
            {{ isFollowing ? '×”×¤×¡×§ ×œ×¢×§×•×‘' : '×¢×§×•×‘' }}
            <mat-icon>{{ isFollowing ? 'person_remove' : 'person_add' }}</mat-icon>
        </button>

    }
    
    </div>

  <div *ngIf="activeTab === 'sheets'">
    <!-- ×›××Ÿ ×™×•×¦×’×• ×ª×•×•×™ ×”××•×–×™×§×” -->
  </div>

  <div *ngIf="activeTab === 'movies'">
    <!-- ×›××Ÿ ×™×•×¦×’×• ×”×¡×¨×˜×•× ×™× -->
  </div>

  <div *ngIf="activeTab === 'photos'">
    <!-- ×›××Ÿ ×™×•×¦×’×• ×ª××•× ×•×ª -->
  </div>

  <div *ngIf="activeTab === 'followers'">
    <!-- ×›××Ÿ ×¨×©×™××ª ×”×¢×•×§×‘×™× -->
  </div>

  <div *ngIf="activeTab === 'following'">
    <!-- ×›××Ÿ ×¨×©×™××ª ×”× ×¢×§×‘×™× -->
  </div>

</div>