<div class="profile-container">

  <section class="profile-card">

    <!-- Cover Image -->
    <div class="cover-image-wrapper">
      <img src="./assets/images/3.jpg" alt="Cover Image" class="cover-image">
    </div>

    <!-- Profile Info -->
    <div class="profile-info-section">

      <!-- Profile Picture with Active Dot -->
      <div class="profile-picture-wrapper">
        <img [src]="fileUtilsService.getImageUrl(profileData?.imageProfilePath)" alt="Profile Picture"
          class="profile-image">
        <span class="active-dot"></span>
      </div>

      <!-- User Details -->
      <div class="user-details">
        <h2>{{ profileData?.name }}</h2>
        <div class="contact-details">
          <span *ngIf="profileData?.city && profileData?.country" class="location">
            <mat-icon>location_on</mat-icon>
            {{ profileData?.city }}, {{ profileData?.country }}
          </span>
          <span *ngIf="profileData?.email" class="website">
            <mat-icon>email</mat-icon>
            <a [href]="profileData?.email" target="_blank">{{ profileData?.email }}</a>
          </span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">

        <!-- ×× ×–×” ×”×¤×¨×•×¤×™×œ ×©×œ ×”××©×ª××© ×”× ×•×›×—×™ -->
        <!-- ×× ×–×” ×”×¤×¨×•×¤×™×œ ×©×œ ×”××©×ª××© ×”× ×•×›×—×™ -->
        <ng-container *ngIf="profileData && isCurrentUserProfile; else notCurrentUser">
          <button class="edit-btn" (click)="openEditProfileModal()">
            <mat-icon>edit</mat-icon>
            ×¢×¨×•×š ×¤×¨×•×¤×™×œ
          </button>

          <button *ngIf="!isTeacher" class="teacher-signup-btn">
            <!-- (click)="checkTeacherEligibility()" -->
            <mat-icon>school</mat-icon>
            ×”×¤×•×š ×œ××•×¨×”
          </button>
          <button class="signout-btn" (click)="handleSignOut()">
            <mat-icon>logout</mat-icon>
            ×”×ª× ×ª×§
          </button>
        </ng-container>


        <!-- ×× ×–×” ×¤×¨×•×¤×™×œ ×©×œ ××©×ª××© ××—×¨ -->
        <ng-template #notCurrentUser>
         <button mat-raised-button color="accent" [disabled]="followButtonDisabled" (click)="followUser()" class="button">
  <mat-icon>{{ isFollowing ? 'person_remove' : 'person_add' }}</mat-icon>
  {{ followStatus === EFollowStatus.PENDING ? 'Awaiting approval' : (isFollowing ? 'Unfollow' : 'Follow') }}
</button>


        </ng-template>

      </div>

    </div>

  </section>

</div>

<!-- Description Section -->
<div class="profile-description" *ngIf="profileData?.description || profileData?.teacher">

  <!-- Role / Teacher Status -->
  <div class="role-section" *ngIf="profileData?.teacher">
    ğŸ‘¨â€ğŸ« ××•×¨×” ×œ××•×–×™×§×”
  </div>

  <!-- User Description -->
  <p class="description-text" *ngIf="profileData?.description">
    {{ profileData?.description }}
  </p>

</div>

<!-- Profile Navigation Tabs -->
<div class="profile-tabs">
  <button [class.active]="activeTab==='overview'" (click)="setActiveTab('overview')">
    <i class="material-icons">person_outline</i> Overview
  </button>

  <button [class.active]="activeTab==='tracks'" (click)="setActiveTab('tracks')">
    <i class="material-icons">music_note</i> Tracks (0)
  </button>

  <button [class.active]="activeTab==='movies'" (click)="setActiveTab('movies')">
    <i class="material-icons">videocam</i> Videos (0)
  </button>

  <button [class.active]="activeTab==='sheets'" (click)="setActiveTab('sheets')">
    <i class="material-icons">description</i> Sheets ({{ sheets?.length || 0 }})
  </button>

  <button [class.active]="activeTab==='posts'" (click)="setActiveTab('posts')">
    <i class="material-icons">chat_bubble_outline</i> Posts ({{ posts?.length || 0 }})
  </button>
</div>
<div class="tab-content">

  <div *ngIf="activeTab === 'posts'">
    <app-posts [postsFromProfile]="posts ?? []"></app-posts>
  </div>

  <div *ngIf="activeTab === 'sheets'">
    <app-sheets-music [sheets]="sheets ?? []"></app-sheets-music>
  </div>

  <div *ngIf="activeTab === 'movies'">
  </div>

  <div *ngIf="activeTab === 'tracks'">
  </div>

  <div *ngIf="activeTab === 'overview'">
  </div>

</div>